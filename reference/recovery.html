<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate and estimate a model — recovery • discounting</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate and estimate a model — recovery"><meta name="description" content="This function takes in one or two models of a same dimensionality and
simulates data with the first and estimates the second model on those data.
This allows users to perform recovery studies – the topic of which is to
find out how accurately the parameters a model can be estimated – and to
perform distinguishability studies – the topic of which is to find out how
well we can distinguish between one or the other model based on their fit
or some statistics."><meta property="og:description" content="This function takes in one or two models of a same dimensionality and
simulates data with the first and estimates the second model on those data.
This allows users to perform recovery studies – the topic of which is to
find out how accurately the parameters a model can be estimated – and to
perform distinguishability studies – the topic of which is to find out how
well we can distinguish between one or the other model based on their fit
or some statistics."><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">discounting</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><h6 class="dropdown-header" data-toc-skip>Usage</h6></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/ndpvh/discounting-affect/" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Simulate and estimate a model</h1>
      <small class="dont-index">Source: <a href="https://github.com/ndpvh/discounting-affect/tree/main/R/recovery.R"><code>R/recovery.R</code></a></small>
      <div class="d-none name"><code>recovery.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function takes in one or two models of a same dimensionality and
simulates data with the first and estimates the second model on those data.
This allows users to perform recovery studies – the topic of which is to
find out how accurately the parameters a model can be estimated – and to
perform distinguishability studies – the topic of which is to find out how
well we can distinguish between one or the other model based on their fit
or some statistics.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">recovery</span><span class="op">(</span><span class="va">sim_model</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'model'</span></span>
<span><span class="fu">recovery</span><span class="op">(</span></span>
<span>  <span class="va">sim_model</span>,</span>
<span>  fit_model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  iterations <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  fx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  X <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Xfun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  N <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dynamics <span class="op">=</span> <span class="st">"isotropic"</span>,</span>
<span>  covariance <span class="op">=</span> <span class="st">"symmetric"</span>,</span>
<span>  sim_dynamics <span class="op">=</span> <span class="va">dynamics</span>,</span>
<span>  sim_covariance <span class="op">=</span> <span class="va">covariance</span>,</span>
<span>  fit_dynamics <span class="op">=</span> <span class="va">dynamics</span>,</span>
<span>  fit_covariance <span class="op">=</span> <span class="va">covariance</span>,</span>
<span>  print_iteration <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  print_content <span class="op">=</span> <span class="st">""</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-sim-model">sim_model<a class="anchor" aria-label="anchor" href="#arg-sim-model"></a></dt>
<dd><p>An instance of the <code><a href="model-class.html">model-class</a></code>
with which the data will be generated/simulated. Note that this model can
be empty: Parameters will be simulated automatically within this function.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="fit.html">fit</a></code>.</p></dd>


<dt id="arg-fit-model">fit_model<a class="anchor" aria-label="anchor" href="#arg-fit-model"></a></dt>
<dd><p>An instance of the <code><a href="model-class.html">model-class</a></code>
that will be estimated on the simulated data. Note that this model can be
empty, but should have a same dimensionality (that is, <code>d</code> and <code>k</code>)
as <code>sim_model</code>. By default, <code>fit_model</code> is equal to <code>sim_model</code></p></dd>


<dt id="arg-iterations">iterations<a class="anchor" aria-label="anchor" href="#arg-iterations"></a></dt>
<dd><p>Integer denoting the number of iterations to run for the
recovery/distinguishability study. Defaults to <code>100</code>.</p></dd>


<dt id="arg-fx">fx<a class="anchor" aria-label="anchor" href="#arg-fx"></a></dt>
<dd><p>Named list of functions that take the output of the estimation
procedure and summarize it in a way. The function should only take in a
single argument, it being the output of<code><a href="fit.html">fit</a></code>, and
should return a single value. Examples of functions that may be useful to
include are estimates of \(AIC\) and \(BIC\). Defaults to an empty list.</p></dd>


<dt id="arg-x">X<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Numeric vector or numeric matrix containing the values of the
predictor variable(s). If a numeric vector, the dimension <code>k</code> of the
predictor variables within <code>object</code> should be equal to <code>1</code>. If
a numeric matrix, the dimension <code>k</code> of the predictor variables within
<code>object</code> should be equal to the number of columns provided to this
argument. The length of the provided vector or the number of rows of the
provided matrix will determine the number of simulated datapoints. Defaults
to <code>NULL</code>. If provided, it overrides the value of <code>Xfun</code>.</p></dd>


<dt id="arg-xfun">Xfun<a class="anchor" aria-label="anchor" href="#arg-xfun"></a></dt>
<dd><p>Function or a list of functions that define how the values of
the predictor variable(s) should be generated. The functions should take in
a single argument <code>N</code> defining the number of values generated for this
predictor variable, and hence the number of datapoints that should be
generated for the simulation. If a list, then the result of each function in
the list will be bound together in a matrix. Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-n">N<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Number of datapoints to simulate. Passed on to <code>Xfun</code> when
defined. Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-dynamics-sim-dynamics-fit-dynamics">dynamics, sim_dynamics, fit_dynamics<a class="anchor" aria-label="anchor" href="#arg-dynamics-sim-dynamics-fit-dynamics"></a></dt>
<dd><p>Character denoting the structure of
the dynamic parameters of the models. See <code><a href="fill.html">fill</a></code> for
guidance on their potential values. By default, both the simulation and
fitting model are <code>"isotropic"</code>.</p></dd>


<dt id="arg-covariance-sim-covariance-fit-covariance">covariance, sim_covariance, fit_covariance<a class="anchor" aria-label="anchor" href="#arg-covariance-sim-covariance-fit-covariance"></a></dt>
<dd><p>Character denoting the
structure of the covariance matrix for the models. See
<code><a href="fill.html">fill</a></code> for guidance on their potential values. By
default, both the simulation and fitting model are <code>"symmetric"</code>.</p></dd>


<dt id="arg-print-iteration">print_iteration<a class="anchor" aria-label="anchor" href="#arg-print-iteration"></a></dt>
<dd><p>Logical denoting whether to print the iteration of
the recovery at this moment. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-print-content">print_content<a class="anchor" aria-label="anchor" href="#arg-print-content"></a></dt>
<dd><p>Character containing information that you would wish
to print alongside the iteration. Gets printed before the iteration itself.
Defaults to an empty string.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Named list containing a <code>data.frame</code> with simulated parameters
(under <code>"simulate"</code>) and a <code>data.frame</code> with estimated parameters,
the result of the objective function, and other statistics that users can
compute based on the output of <code><a href="fit.html">fit</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a study in which we simulate from a slightly more complicated model</span></span></span>
<span class="r-in"><span><span class="co"># and estimate a simpler model, both based on the exponential discounting </span></span></span>
<span class="r-in"><span><span class="co"># model</span></span></span>
<span class="r-in"><span><span class="fu">recovery</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="exponential.html">exponential</a></span><span class="op">(</span>d <span class="op">=</span> <span class="fl">1</span>, k <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Specifications of the recovery</span></span></span>
<span class="r-in"><span>  iterations <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  fx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"aic"</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> </span></span>
<span class="r-in"><span>      <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">residuals</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">objective</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">residuals</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">parameters</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Arguments for simulate</span></span></span>
<span class="r-in"><span>  Xfun <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  N <span class="op">=</span> <span class="fl">25</span>, </span></span>
<span class="r-in"><span>  sim_dynamics <span class="op">=</span> <span class="st">"symmetric"</span>,</span></span>
<span class="r-in"><span>  sim_covariance <span class="op">=</span> <span class="st">"symmetric"</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Arguments for fit</span></span></span>
<span class="r-in"><span>  fit_dynamics <span class="op">=</span> <span class="st">"isotropic"</span>,</span></span>
<span class="r-in"><span>  fit_covariance <span class="op">=</span> <span class="st">"isotropic"</span>,</span></span>
<span class="r-in"><span>  itermax <span class="op">=</span> <span class="fl">25</span>,</span></span>
<span class="r-in"><span>  trace <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1                      2                      3                      4                      5                      6                      7                      8                      9                      10                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $simulate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        alpha_1   beta_11   gamma_11   sigma_11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.04718214  1.991339 0.95672699 0.01756332</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  -0.81088930  1.426539 0.55630113 0.67094691</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  -0.69590675 -4.515063 0.68234734 0.92588219</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  -0.57706106  1.546639 0.02898173 0.25566434</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   0.88520977  4.223072 0.59879785 0.69701228</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   0.03722637  1.040132 0.90861255 0.31559462</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  -0.41505119  4.300577 0.90982185 0.24311205</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  -0.83420104 -1.050362 0.50488693 0.41220518</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  -0.13091330  2.109529 0.89065568 0.10986635</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  0.25219549  2.498303 0.78960627 0.46784837</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        alpha_1   beta_11   gamma_11    sigma_11  objective       aic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.03802146  2.032352 0.95288325 0.006493631  0.2192525  6.482469</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  -0.98023331  1.507981 0.20281709 0.192164784  4.6219609  9.530819</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  -0.48831415 -4.353223 0.64153970 0.856432308 20.5545752 11.023084</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  -0.54609764  1.560876 0.06682918 0.063965546  1.5352623  8.428701</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   0.83323455  4.294115 0.60032750 0.427434362 10.2595347 10.328207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  -0.02916657  1.002506 0.92813084 0.197082742  4.7319374  9.554335</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  -0.45954171  4.302533 0.90348396 0.045743294  1.1117774  8.105960</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  -0.79688947 -1.064166 0.50422185 0.091175908  2.1896802  8.783755</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  -0.24557647  2.086468 0.88077115 0.013665804  0.3279812  6.885201</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  0.52271390  2.456810 0.80438984 0.225795128  5.4200274  9.690101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ndpvh.github.io" class="external-link">Niels Vanhasbroeck</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

